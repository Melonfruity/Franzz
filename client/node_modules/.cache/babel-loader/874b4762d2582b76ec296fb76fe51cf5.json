{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Path = function (_super) {\n  __extends(Path, _super);\n\n  function Path(config) {\n    var _this = _super.call(this, config) || this;\n\n    _this.dataArray = [];\n    _this.pathLength = 0;\n    _this.dataArray = Path.parsePathData(_this.data());\n    _this.pathLength = 0;\n\n    for (var i = 0; i < _this.dataArray.length; ++i) {\n      _this.pathLength += _this.dataArray[i].pathLength;\n    }\n\n    _this.on('dataChange.konva', function () {\n      this.dataArray = Path.parsePathData(this.data());\n      this.pathLength = 0;\n\n      for (var i = 0; i < this.dataArray.length; ++i) {\n        this.pathLength += this.dataArray[i].pathLength;\n      }\n    });\n\n    return _this;\n  }\n\n  Path.prototype._sceneFunc = function (context) {\n    var ca = this.dataArray;\n    context.beginPath();\n\n    for (var n = 0; n < ca.length; n++) {\n      var c = ca[n].command;\n      var p = ca[n].points;\n\n      switch (c) {\n        case 'L':\n          context.lineTo(p[0], p[1]);\n          break;\n\n        case 'M':\n          context.moveTo(p[0], p[1]);\n          break;\n\n        case 'C':\n          context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n          break;\n\n        case 'Q':\n          context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n          break;\n\n        case 'A':\n          var cx = p[0],\n              cy = p[1],\n              rx = p[2],\n              ry = p[3],\n              theta = p[4],\n              dTheta = p[5],\n              psi = p[6],\n              fs = p[7];\n          var r = rx > ry ? rx : ry;\n          var scaleX = rx > ry ? 1 : rx / ry;\n          var scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(psi);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-psi);\n          context.translate(-cx, -cy);\n          break;\n\n        case 'z':\n          context.closePath();\n          break;\n      }\n    }\n\n    context.fillStrokeShape(this);\n  };\n\n  Path.prototype.getSelfRect = function () {\n    var points = [];\n    this.dataArray.forEach(function (data) {\n      if (data.command === 'A') {\n        points = points.concat([data.points[0] - data.points[2], data.points[1] - data.points[3], data.points[0] + data.points[2], data.points[1] + data.points[3]]);\n      } else {\n        points = points.concat(data.points);\n      }\n    });\n    var minX = points[0];\n    var maxX = points[0];\n    var minY = points[1];\n    var maxY = points[1];\n    var x, y;\n\n    for (var i = 0; i < points.length / 2; i++) {\n      x = points[i * 2];\n      y = points[i * 2 + 1];\n\n      if (!isNaN(x)) {\n        minX = Math.min(minX, x);\n        maxX = Math.max(maxX, x);\n      }\n\n      if (!isNaN(y)) {\n        minY = Math.min(minY, y);\n        maxY = Math.max(maxY, y);\n      }\n    }\n\n    return {\n      x: Math.round(minX),\n      y: Math.round(minY),\n      width: Math.round(maxX - minX),\n      height: Math.round(maxY - minY)\n    };\n  };\n\n  Path.prototype.getLength = function () {\n    return this.pathLength;\n  };\n\n  Path.prototype.getPointAtLength = function (length) {\n    var point,\n        i = 0,\n        ii = this.dataArray.length;\n\n    if (!ii) {\n      return null;\n    }\n\n    while (i < ii && length > this.dataArray[i].pathLength) {\n      length -= this.dataArray[i].pathLength;\n      ++i;\n    }\n\n    if (i === ii) {\n      point = this.dataArray[i - 1].points.slice(-2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    if (length < 0.01) {\n      point = this.dataArray[i].points.slice(0, 2);\n      return {\n        x: point[0],\n        y: point[1]\n      };\n    }\n\n    var cp = this.dataArray[i];\n    var p = cp.points;\n\n    switch (cp.command) {\n      case 'L':\n        return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n\n      case 'C':\n        return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n\n      case 'Q':\n        return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n\n      case 'A':\n        var cx = p[0],\n            cy = p[1],\n            rx = p[2],\n            ry = p[3],\n            theta = p[4],\n            dTheta = p[5],\n            psi = p[6];\n        theta += dTheta * length / cp.pathLength;\n        return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n    }\n\n    return null;\n  };\n\n  Path.getLineLength = function (x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n\n  Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n    if (fromX === undefined) {\n      fromX = P1x;\n    }\n\n    if (fromY === undefined) {\n      fromY = P1y;\n    }\n\n    var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n\n    if (P2x < P1x) {\n      run *= -1;\n    }\n\n    var rise = m * run;\n    var pt;\n\n    if (P2x === P1x) {\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix, iy;\n      var len = this.getLineLength(P1x, P1y, P2x, P2y);\n\n      if (len < 0.00000001) {\n        return undefined;\n      }\n\n      var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n      u = u / (len * len);\n      ix = P1x + u * (P2x - P1x);\n      iy = P1y + u * (P2y - P1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n      if (P2x < P1x) {\n        run *= -1;\n      }\n\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n\n    return pt;\n  };\n\n  Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n    function CB1(t) {\n      return t * t * t;\n    }\n\n    function CB2(t) {\n      return 3 * t * t * (1 - t);\n    }\n\n    function CB3(t) {\n      return 3 * t * (1 - t) * (1 - t);\n    }\n\n    function CB4(t) {\n      return (1 - t) * (1 - t) * (1 - t);\n    }\n\n    var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n    var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n    function QB1(t) {\n      return t * t;\n    }\n\n    function QB2(t) {\n      return 2 * t * (1 - t);\n    }\n\n    function QB3(t) {\n      return (1 - t) * (1 - t);\n    }\n\n    var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n    var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi),\n        sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  };\n\n  Path.parsePathData = function (data) {\n    if (!data) {\n      return [];\n    }\n\n    var cs = data;\n    var cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\n    cs = cs.replace(new RegExp(' ', 'g'), ',');\n\n    for (var n = 0; n < cc.length; n++) {\n      cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n    }\n\n    var arr = cs.split('|');\n    var ca = [];\n    var coords = [];\n    var cpx = 0;\n    var cpy = 0;\n    var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n    var match;\n\n    for (n = 1; n < arr.length; n++) {\n      var str = arr[n];\n      var c = str.charAt(0);\n      str = str.slice(1);\n      coords.length = 0;\n\n      while (match = re.exec(str)) {\n        coords.push(match[0]);\n      }\n\n      var p = [];\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        var parsed = parseFloat(coords[j]);\n\n        if (!isNaN(parsed)) {\n          p.push(parsed);\n        } else {\n          p.push(0);\n        }\n      }\n\n      while (p.length > 0) {\n        if (isNaN(p[0])) {\n          break;\n        }\n\n        var cmd = null;\n        var points = [];\n        var startX = cpx,\n            startY = cpy;\n        var prevCmd, ctlPtx, ctlPty;\n        var rx, ry, psi, fa, fs, x1, y1;\n\n        switch (c) {\n          case 'l':\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'L':\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'm':\n            var dx = p.shift();\n            var dy = p.shift();\n            cpx += dx;\n            cpy += dy;\n            cmd = 'M';\n\n            if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n              for (var idx = ca.length - 2; idx >= 0; idx--) {\n                if (ca[idx].command === 'M') {\n                  cpx = ca[idx].points[0] + dx;\n                  cpy = ca[idx].points[1] + dy;\n                  break;\n                }\n              }\n            }\n\n            points.push(cpx, cpy);\n            c = 'l';\n            break;\n\n          case 'M':\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'M';\n            points.push(cpx, cpy);\n            c = 'L';\n            break;\n\n          case 'h':\n            cpx += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'H':\n            cpx = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'v':\n            cpy += p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'V':\n            cpy = p.shift();\n            cmd = 'L';\n            points.push(cpx, cpy);\n            break;\n\n          case 'C':\n            points.push(p.shift(), p.shift(), p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'c':\n            points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'S':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 's':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'C') {\n              ctlPtx = cpx + (cpx - prevCmd.points[2]);\n              ctlPty = cpy + (cpy - prevCmd.points[3]);\n            }\n\n            points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'C';\n            points.push(cpx, cpy);\n            break;\n\n          case 'Q':\n            points.push(p.shift(), p.shift());\n            cpx = p.shift();\n            cpy = p.shift();\n            points.push(cpx, cpy);\n            break;\n\n          case 'q':\n            points.push(cpx + p.shift(), cpy + p.shift());\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(cpx, cpy);\n            break;\n\n          case 'T':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 't':\n            ctlPtx = cpx;\n            ctlPty = cpy;\n            prevCmd = ca[ca.length - 1];\n\n            if (prevCmd.command === 'Q') {\n              ctlPtx = cpx + (cpx - prevCmd.points[0]);\n              ctlPty = cpy + (cpy - prevCmd.points[1]);\n            }\n\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'Q';\n            points.push(ctlPtx, ctlPty, cpx, cpy);\n            break;\n\n          case 'A':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx = p.shift();\n            cpy = p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n\n          case 'a':\n            rx = p.shift();\n            ry = p.shift();\n            psi = p.shift();\n            fa = p.shift();\n            fs = p.shift();\n            x1 = cpx;\n            y1 = cpy;\n            cpx += p.shift();\n            cpy += p.shift();\n            cmd = 'A';\n            points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n            break;\n        }\n\n        ca.push({\n          command: cmd || c,\n          points: points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, cmd || c, points)\n        });\n      }\n\n      if (c === 'z' || c === 'Z') {\n        ca.push({\n          command: 'z',\n          points: [],\n          start: undefined,\n          pathLength: 0\n        });\n      }\n    }\n\n    return ca;\n  };\n\n  Path.calcLength = function (x, y, cmd, points) {\n    var len, p1, p2, t;\n    var path = Path;\n\n    switch (cmd) {\n      case 'L':\n        return path.getLineLength(x, y, points[0], points[1]);\n\n      case 'C':\n        len = 0.0;\n        p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'Q':\n        len = 0.0;\n        p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case 'A':\n        len = 0.0;\n        var start = points[4];\n        var dTheta = points[5];\n        var end = points[4] + dTheta;\n        var inc = Math.PI / 180.0;\n\n        if (Math.abs(start - end) < inc) {\n          inc = Math.abs(start - end);\n        }\n\n        p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n        if (dTheta < 0) {\n          for (t = start - inc; t > end; t -= inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        } else {\n          for (t = start + inc; t < end; t += inc) {\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            p1 = p2;\n          }\n        }\n\n        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n        return len;\n    }\n\n    return 0;\n  };\n\n  Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n    var psi = psiDeg * (Math.PI / 180.0);\n    var xp = Math.cos(psi) * (x1 - x2) / 2.0 + Math.sin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0 + Math.cos(psi) * (y1 - y2) / 2.0;\n    var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n\n    if (lambda > 1) {\n      rx *= Math.sqrt(lambda);\n      ry *= Math.sqrt(lambda);\n    }\n\n    var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n\n    if (fa === fs) {\n      f *= -1;\n    }\n\n    if (isNaN(f)) {\n      f = 0;\n    }\n\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n\n    var vMag = function (v) {\n      return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    };\n\n    var vRatio = function (u, v) {\n      return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n    };\n\n    var vAngle = function (u, v) {\n      return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n    };\n\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n\n    if (vRatio(u, v) <= -1) {\n      dTheta = Math.PI;\n    }\n\n    if (vRatio(u, v) >= 1) {\n      dTheta = 0;\n    }\n\n    if (fs === 0 && dTheta > 0) {\n      dTheta = dTheta - 2 * Math.PI;\n    }\n\n    if (fs === 1 && dTheta < 0) {\n      dTheta = dTheta + 2 * Math.PI;\n    }\n\n    return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n  };\n\n  return Path;\n}(Shape_1.Shape);\n\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n\nGlobal_1._registerNode(Path);\n\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);","map":{"version":3,"sources":["/home/hei/Documents/finals/JEK/client/node_modules/konva/lib/shapes/Path.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","Util_1","require","Factory_1","Shape_1","Global_1","Path","_super","config","_this","call","dataArray","pathLength","parsePathData","data","i","length","on","_sceneFunc","context","ca","beginPath","n","c","command","points","lineTo","moveTo","bezierCurveTo","quadraticCurveTo","cx","cy","rx","ry","theta","dTheta","psi","fs","r","scaleX","scaleY","translate","rotate","scale","arc","closePath","fillStrokeShape","getSelfRect","forEach","concat","minX","maxX","minY","maxY","x","y","isNaN","Math","min","max","round","width","height","getLength","getPointAtLength","point","ii","slice","cp","getPointOnLine","start","getPointOnCubicBezier","getPointOnQuadraticBezier","getPointOnEllipticalArc","getLineLength","x1","y1","x2","y2","sqrt","dist","P1x","P1y","P2x","P2y","fromX","fromY","undefined","m","run","rise","pt","ix","iy","len","u","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","t","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","cos","sinPsi","sin","cs","cc","replace","RegExp","arr","split","coords","cpx","cpy","re","match","str","charAt","exec","push","j","jlen","parsed","parseFloat","cmd","startX","startY","prevCmd","ctlPtx","ctlPty","fa","shift","dx","dy","idx","convertEndpointToCenterParameterization","calcLength","p1","p2","path","end","inc","PI","abs","psiDeg","xp","yp","lambda","f","cxp","cyp","vMag","v","vRatio","vAngle","acos","Shape","className","_attrsAffectingSize","_registerNode","Factory","addGetterSetter","Collection","mapMethods"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Global_1 = require(\"../Global\");\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(config) {\n        var _this = _super.call(this, config) || this;\n        _this.dataArray = [];\n        _this.pathLength = 0;\n        _this.dataArray = Path.parsePathData(_this.data());\n        _this.pathLength = 0;\n        for (var i = 0; i < _this.dataArray.length; ++i) {\n            _this.pathLength += _this.dataArray[i].pathLength;\n        }\n        _this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.data());\n            this.pathLength = 0;\n            for (var i = 0; i < this.dataArray.length; ++i) {\n                this.pathLength += this.dataArray[i].pathLength;\n            }\n        });\n        return _this;\n    }\n    Path.prototype._sceneFunc = function (context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    context.closePath();\n                    break;\n            }\n        }\n        context.fillStrokeShape(this);\n    };\n    Path.prototype.getSelfRect = function () {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                points = points.concat([\n                    data.points[0] - data.points[2],\n                    data.points[1] - data.points[3],\n                    data.points[0] + data.points[2],\n                    data.points[1] + data.points[3]\n                ]);\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: Math.round(minX),\n            y: Math.round(minY),\n            width: Math.round(maxX - minX),\n            height: Math.round(maxY - minY)\n        };\n    };\n    Path.prototype.getLength = function () {\n        return this.pathLength;\n    };\n    Path.prototype.getPointAtLength = function (length) {\n        var point, i = 0, ii = this.dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > this.dataArray[i].pathLength) {\n            length -= this.dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = this.dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1]\n            };\n        }\n        if (length < 0.01) {\n            point = this.dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1]\n            };\n        }\n        var cp = this.dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    };\n    Path.getLineLength = function (x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    };\n    Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            if (len < 0.00000001) {\n                return undefined;\n            }\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise\n            };\n        }\n        return pt;\n    };\n    Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta)\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n        };\n    };\n    Path.parsePathData = function (data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A'\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points)\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0\n                });\n            }\n        }\n        return ca;\n    };\n    Path.calcLength = function (x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                len = 0.0;\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'Q':\n                len = 0.0;\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    };\n    Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    };\n    return Path;\n}(Shape_1.Shape));\nexports.Path = Path;\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\nGlobal_1._registerNode(Path);\nFactory_1.Factory.addGetterSetter(Path, 'data');\nUtil_1.Collection.mapMethods(Path);\n"]},"metadata":{},"sourceType":"script"}